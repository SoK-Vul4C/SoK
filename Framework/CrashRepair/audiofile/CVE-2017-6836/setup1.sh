#!/bin/bash
git clone https://github.com/mpruett/audiofile.git source
cd source

#v0.3.6
git checkout d19a5ac

CC=clang-10 CXX=clang++-10 ./autogen.sh --disable-docs CFLAGS="-fsanitize=address -fno-omit-frame-pointer -g" CXXFLAGS="-fsanitize=address -fno-omit-frame-pointer -g" LDFLAGS="-fsanitize=address"
make -j10

cd sfcommands
clang -Wall -fsanitize=address -fno-omit-frame-pointer -g -fsanitize=address -o sfinfo sfinfo.o printinfo.o  ../libaudiofile/.libs/libaudiofile.so -Wl,-rpath -Wl,$dir/libaudiofile/.libs
clang -Wall -fsanitize=address -fno-omit-frame-pointer -g -fsanitize=address -o sfconver sfconvert.o printinfo.o  ../libaudiofile/.libs/libaudiofile.so -Wl,-rpath -Wl,$dir/libaudiofile/.libs