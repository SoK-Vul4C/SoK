#!/bin/bash
git clone https://github.com/mpruett/audiofile.git source
cd source

git checkout b62c902

CC=gcc-5 CXX=g++-5 ./autogen.sh --disable-docs CFLAGS="-fsanitize=address,undefined -fno-omit-frame-pointer -g" CXXFLAGS="-fsanitize=address,undefined -fno-omit-frame-pointer -g" LDFLAGS="-fsanitize=address,undefined"

make -j32

dir=$(pwd)
cd sfcommands
gcc -Wall -fsanitize=address,undefined -fno-omit-frame-pointer -g -fsanitize=address -o sfinfo sfinfo.o printinfo.o  ../libaudiofile/.libs/libaudiofile.so -Wl,-rpath -Wl,$dir/libaudiofile/.libs
gcc -Wall -fsanitize=address,undefined -fno-omit-frame-pointer -g -fsanitize=address -o sfconvert sfconvert.o printinfo.o  ../libaudiofile/.libs/libaudiofile.so -Wl,-rpath -Wl,$dir/libaudiofile/.libs

