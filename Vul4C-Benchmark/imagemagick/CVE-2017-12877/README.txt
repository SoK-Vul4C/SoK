Affected version:
7.0.6.5

Source code:
git clone https://github.com/ImageMagick/ImageMagick.git

Commit hash:
781c31aeb16047d7123502666dea2ecdc97c072e

Command:
> cd /path/to/compile/source
> ./utilities/magick convert $FILE null

Expected Output:
=================================================================
==420116==ERROR: AddressSanitizer: heap-use-after-free on address 0x627000034550 at pc 0x55555563936a bp 0x7fffffff39c0 sp 0x7fffffff39b0
READ of size 8 at 0x627000034550 thread T0
    #0 0x555555639369 in DestroyImage MagickCore/image.c:1186
    #1 0x55555580211d in ReadMATImage coders/mat.c:1374
    #2 0x555555aaa442 in ReadImage MagickCore/constitute.c:497
    #3 0x555555aad328 in ReadImages MagickCore/constitute.c:866
    #4 0x555555e1e117 in ConvertImageCommand MagickWand/convert.c:641
    #5 0x555555f3ef62 in MagickCommandGenesis MagickWand/mogrify.c:183
    #6 0x55555562cda0 in MagickMain utilities/magick.c:149
    #7 0x55555562d026 in main utilities/magick.c:180
    #8 0x7ffff38a9c86 in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x21c86)
    #9 0x55555562c819 in _start (/home/skd/benchmark-setup/imagemagick/CVE-2017-12877/source/utilities/magick+0x22c819)

