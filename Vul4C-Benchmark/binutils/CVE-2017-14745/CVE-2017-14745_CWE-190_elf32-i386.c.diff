diff --git a/bfd/elf32-i386.c b/bfd/elf32-i386.c
index 00a639791305467ad3e81fcf61426b33d0959c93..5c1c3ff7907e7ae79deacdbef76dd2540377538d 100644 (file)
--- a/bfd/elf32-i386.c
+++ b/bfd/elf32-i386.c
@@ -6342,6 +6342,8 @@ elf_i386_get_synthetic_symtab (bfd *abfd,
 
   dynrelcount = bfd_canonicalize_dynamic_reloc (abfd, dynrelbuf,
                                                dynsyms);
+  if (dynrelcount < 0)
+    return -1;
 
   /* Sort the relocs by address.  */
   qsort (dynrelbuf, dynrelcount, sizeof (arelent *), compare_relocs);