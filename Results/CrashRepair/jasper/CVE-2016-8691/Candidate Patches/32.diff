--- PATCH 32 ---
@@ -1533,7 +1533,7 @@
 		return -1;
 	}
 	if (val) {
-		*val = c;
+		if (!((*val != 0))) { exit(1); } *val = c;
 	}
 	return 0;
 }