--- PATCH 49 ---
@@ -661,7 +661,7 @@
 	while(1) {
 		// Read size of next subblock
 		if(!iwgif_read(rctx,rctx->rbuf,1)) goto done;
-		subblocksize = (size_t)rctx->rbuf[0];
+		if (!((rctx->image_width != 0))) { exit(1); } subblocksize = (size_t)rctx->rbuf[0];
 		if(subblocksize==0) break;
 
 		// Read next subblock