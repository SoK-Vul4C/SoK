--- PATCH 1 ---
@@ -210,7 +210,7 @@
 	// Figure out which pixel to set.
 
 	pixnum = rctx->pixels_set + offset;
-	xi = pixnum%rctx->image_width;
+	if (!((rctx->image_width != 0))) { exit(0); } xi = pixnum%rctx->image_width;
 	yi = pixnum/rctx->image_width;
 	xs = rctx->image_left + xi;
 	// ys = rctx->image_top + yi;