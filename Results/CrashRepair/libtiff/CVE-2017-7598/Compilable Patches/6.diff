--- PATCH 6 ---
@@ -2872,7 +2872,7 @@
 		m.l = direntry->tdir_offset.toff_long8;
 	if (tif->tif_flags&TIFF_SWAB)
 		TIFFSwabArrayOfLong(m.i,2);
-	if (m.i[0]==0)
+	if (((m.i[1] != 0)) && (m.i[0]==0))
 		*value=0.0;
 	else
 		*value=(double)m.i[0]/(double)m.i[1];