--- PATCH 32 ---
@@ -947,7 +947,7 @@
 	uint32 i;
 	int ok;
 	conv = _TIFFmalloc(count*sizeof(double));
-	if (conv == NULL)
+	if ((conv == NULL) && (((value < 255) && (0 < value))))
 	{
 		TIFFErrorExt(tif->tif_clientdata, module, "Out of memory");
 		return (0);