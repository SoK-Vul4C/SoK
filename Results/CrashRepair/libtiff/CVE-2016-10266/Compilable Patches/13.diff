--- PATCH 13 ---
@@ -343,7 +343,7 @@
 	 * rows in the strip (check for truncated last strip on any
 	 * of the separations).
 	 */
-	rowsperstrip=td->td_rowsperstrip;
+	if ((td->td_rowsperstrip != 0)) { rowsperstrip=td->td_rowsperstrip; }
 	if (rowsperstrip>td->td_imagelength)
 		rowsperstrip=td->td_imagelength;
 	stripsperplane=((td->td_imagelength+rowsperstrip-1)/rowsperstrip);